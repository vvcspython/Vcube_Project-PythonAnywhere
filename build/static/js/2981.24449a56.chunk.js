"use strict";(self.webpackChunkvcube=self.webpackChunkvcube||[]).push([[2981],{92981:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var a=s(83462),n=s(26600),c=s(17392),l=s(35316),r=s(98533),i=s(94496),o=s(53193),h=s(79190),d=s(72221),x=s(32143),u=s(81673),m=s(29347),p=s(11906),A=s(65043),f=s(9971),g=s(90573),j=s(35741),y=s(18921),B=s(37786),N=s(77212),b=s(70579);const C=e=>{let{isOpen:t,setIsOpen:s,selectedCourse:C,type:S,handleShowSnackbar:w,setIsLoading:v,fetchBatchAttData:D,studentsData:k,select_Batch:I}=e;const{fetchBatchData:T}=(0,A.useContext)(B.w),{fetchBatchAttendanceDataByCourse:z,postBatchAttendanceData:L}=(0,A.useContext)(N.N),[W,_]=(0,A.useState)([]),[$,E]=(0,A.useState)(null),[O,V]=(0,A.useState)(null),[F,M]=(0,A.useState)(null),R=Array.isArray(k)?k.filter((e=>e.Course===C&&(e.BatchName===I||"All"===I))).length:0,q=(0,f.c)().split(" ");(0,A.useEffect)((()=>{C&&(async()=>{const e=await T(C),t=await z(C);e&&e.message?(w("error",e.message),G()):e&&e.length>0?(_(e),t&&E(t)):e&&0===e.length&&(w("info","No Data Found."),G())})()}),[t]);const G=()=>{M(!1),V(null),s(!1)},H=()=>{if("All"===O){const e=[];W&&W.forEach((t=>{const s={BatchId:t.id,Course:t.Course,BatchName:t.BatchName,Date:q[0],Attendance_Type:S};e.push(s)})),J(e),v(!1)}else{const e=W&&W.find((e=>e.BatchName===O)),t={BatchId:e.id,Course:e.Course,BatchName:O,Date:q[0],Attendance_Type:S};J([t])}},J=async e=>{const t=await L(e);v(!1),t&&t.message?w("error",t.message):(w("success",`${S} Attendance added successfully.`),D()),G()},K=e=>e?Array.isArray($)&&$.some((t=>t.Date===q[0]&&t.BatchName===e.BatchName&&t.Attendance_Type===S)):Array.isArray($)&&$.some((e=>e.Date===q[0]&&e.Attendance_Type===S));return(0,b.jsxs)(a.A,{open:t,sx:{zIndex:"700"},children:[(0,b.jsx)("img",{src:"/images/V-Cube-Logo.png",alt:"",width:"20%",className:"ml-[40%]"}),(0,b.jsxs)(n.A,{variant:"h5",children:["Mock Test"===S?"Weekly Test":S," Attendance"]}),(0,b.jsx)(c.A,{className:"top-2 right-2",sx:{position:"absolute"},onClick:G,children:(0,b.jsx)(g.A,{sx:{fontSize:"35px"}})}),(0,b.jsxs)(l.A,{children:[(0,b.jsxs)(r.A,{className:"flex flex-col items-center justify-center",children:[(0,b.jsxs)(i.A,{variant:"h6",className:"flex items-center",sx:{fontWeight:"bold",color:"#000"},children:["Date: ",(0,b.jsx)(i.A,{color:"primary",variant:"h6",sx:{fontWeight:"bold",marginLeft:"10px"},children:`${q[0]}`})]}),(0,b.jsxs)(i.A,{variant:"h6",className:"flex items-center",sx:{fontWeight:"bold",color:"#000"},children:["Total Students: ",(0,b.jsx)(i.A,{color:"primary",variant:"h6",sx:{fontWeight:"bold",margin:"10px 0 10px 10px"},children:R<10?`0${R}`:R})]}),(0,b.jsxs)(o.A,{className:"w-96 h-20",sx:{margin:"20px 0 10px 0"},children:[(0,b.jsx)(h.A,{className:"flex items-center",sx:{fontSize:"20px",background:"white",width:"123px",paddingLeft:"3px",display:"flex",alignItems:"center"},children:"Select Batch"}),(0,b.jsxs)(d.A,{error:F&&!O,sx:{fontSize:"20px",display:"flex",alignItems:"center",justifyContent:"space-between"},value:O,onChange:e=>V(e.target.value),renderValue:e=>{const t=W.find((t=>t.BatchName===e));return t?t.BatchName:e},children:[W&&W.map((e=>(0,b.jsxs)(x.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},value:e.BatchName,disabled:K(e),children:[e.BatchName," ",K(e)?(0,b.jsx)(j.A,{color:"success",sx:{fontSize:"30px"}}):(0,b.jsx)(y.A,{color:"error",sx:{fontSize:"30px"}})]}))),W&&W.length>0&&(0,b.jsx)(x.A,{value:"All",disabled:K(),children:"All Batches"})]}),(0,b.jsx)(u.A,{sx:{color:"#f44336",marginLeft:"5px"},children:F&&!O?"Select Batch":""})]})]}),(0,b.jsx)(m.A,{children:(0,b.jsxs)(p.A,{sx:{width:"90%",marginRight:"5%",height:"45px"},variant:"contained",onClick:()=>{M(!0),O&&(v(!0),H())},children:["Submit ",S," Attendance"]})})]})]})}}}]);
//# sourceMappingURL=2981.24449a56.chunk.js.map