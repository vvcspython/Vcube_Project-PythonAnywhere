"use strict";(self.webpackChunkvcube=self.webpackChunkvcube||[]).push([[6165],{98546:(e,s,r)=>{r.r(s),r.d(s,{default:()=>N});var l=r(65043),i=r(77739),n=r(17392),a=r(94516),c=r(90889),t=r(86605),o=r(94496),d=r(40710),m=r(11906),h=r(83462),x=r(26600),A=r(35316),u=r(29347),g=r(32514),j=r(60085),f=r(12947),p=r(67610),C=r(35741),y=r(18921),b=r(66734),P=r(70579);const w=(0,b.A)([(0,P.jsx)("path",{d:"M15.18 10.94c.2-.44.32-.92.32-1.44C15.5 7.57 13.93 6 12 6c-.52 0-1 .12-1.44.32z"},"0"),(0,P.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 13c-2.32 0-4.45.8-6.14 2.12C4.7 15.73 4 13.95 4 12c0-1.85.63-3.55 1.69-4.9l2.86 2.86c.21 1.56 1.43 2.79 2.99 2.99l2.2 2.2Q12.885 15 12 15m6.31 1.9L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.54-1.69 4.9"},"1")],"NoAccountsRounded"),N=e=>{let{handleShowSnackbar:s,setIsLoading:r}=e;const{fetchCourse:b}=(0,l.useContext)(j.N),{fetchLoginData:N,userDelete:U,changeUserPermission:D}=(0,l.useContext)(f.h),S=(0,g.ID)("User"),[k,v]=(0,l.useState)(null),[I,L]=(0,l.useState)(null),[W,z]=(0,l.useState)(-1),[E,M]=(0,l.useState)(null),[R,$]=(0,l.useState)(null),[B,T]=(0,l.useState)(!1),V=(0,l.useCallback)((async()=>{let e,l;if(r(!0),"Super Admin"===S?(e=await b(),l=await N()):(e=await b((0,g.ID)("Course")),l=await N((0,g.ID)("Course"))),e&&e.message||l&&l.message)s("error","Error while fetching data. Please try again later.");else{L(l);const s=Array.isArray(l)&&l.some((e=>"Placements"===e.Course)),r=s?[...e,{Course:"Placements"}]:e;v(r)}r(!1)}),[S,b,N,r,s]);(0,l.useEffect)((()=>{V()}),[V]);return r(!1),(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(i.A,{arrow:!0,title:"Refresh",children:(0,P.jsx)(n.A,{sx:{position:"absolute"},className:"top-[6.5rem] right-1",children:(0,P.jsx)(p.A,{onClick:V,fontSize:"large"})})}),Array.isArray(I)&&I.length>1?(0,P.jsx)(a.A,{className:"max-h-[85%] p-1 overflow-y-auto rounded-md",sx:{scrollbarWidth:"thin"},children:"Super Admin"===S?Array.isArray(k)&&k.map(((e,s)=>Array.isArray(I)&&I.some((s=>s.Course===e.Course))&&(0,P.jsxs)(c.A,{expanded:W===s,onChange:()=>z(W===s?-1:s),children:[(0,P.jsx)(t.A,{children:e.Course}),(0,P.jsx)(a.A,{className:"grid grid-cols-4 mb-3",children:["Username","Email","Phone","Permission"].map(((e,s)=>3===s?(0,P.jsxs)(a.A,{className:"grid grid-cols-2 pr-5",children:[(0,P.jsx)(o.A,{sx:{fontWeight:"bold"},color:"primary",className:"text-start",children:"Permission"}),(0,P.jsx)(o.A,{sx:{fontWeight:"bold"},color:"primary",className:"text-center",children:"Delete"})]}):(0,P.jsx)(o.A,{sx:{fontWeight:"bold",padding:"0 20px"},color:"primary",children:e})))}),Array.isArray(I)&&I.map((s=>s.Username!==(0,g.ID)("All").Username&&s.Course===e.Course&&(0,P.jsxs)(d.A,{className:"grid grid-cols-4",children:[(0,P.jsx)(o.A,{children:s.Username}),(0,P.jsx)(o.A,{children:s.Email}),(0,P.jsx)(o.A,{children:s.Phone}),(0,P.jsxs)(a.A,{className:"grid grid-cols-2 place-content-start",children:[(0,P.jsx)(a.A,{className:`ml-3 relative w-16 h-7 ${"Access"===s.Permission?"bg-[#1976d2]":"bg-gray-400"} rounded-full flex items-center`,children:(0,P.jsx)(n.A,{className:"absolute "+("Access"===s.Permission?"left-[1.65rem]":"left-[-0.60rem]"),sx:{transition:"0.3s ease-in-out",zIndex:"10",marginBottom:"0.80px"},onClick:()=>{$(`${s.id}~${s.Permission}`),T(!0)},children:"Access"===s.Permission?(0,P.jsx)(C.A,{sx:{width:"1.90rem",height:"1.90rem",color:"#fff"}}):(0,P.jsx)(y.A,{sx:{width:"1.90rem",height:"1.90rem",color:"#fff"}})})}),(0,P.jsx)(m.A,{variant:"contained",color:"error",sx:{height:"30px"},onClick:()=>{M(s.id),T(!0)},children:"Delete"})]})]})))]},s))):("Admin"===S||"Placements Admin"===S)&&Array.isArray(I)&&I.some((e=>e.Course===(0,g.ID)("Course")))&&(0,P.jsxs)(c.A,{children:[(0,P.jsx)(t.A,{children:(0,g.ID)("Course")}),(0,P.jsx)(a.A,{className:"grid grid-cols-4 mb-3",children:["Username","Email","Phone","Permission"].map(((e,s)=>3===s?(0,P.jsxs)(a.A,{className:"grid grid-cols-2 pr-5",children:[(0,P.jsx)(o.A,{sx:{fontWeight:"bold"},color:"primary",className:"text-start",children:"Permission"}),(0,P.jsx)(o.A,{sx:{fontWeight:"bold"},color:"primary",className:"text-center",children:"Delete"})]}):(0,P.jsx)(o.A,{sx:{fontWeight:"bold",padding:"0 20px"},color:"primary",children:e})))}),Array.isArray(I)&&I.map((e=>e.Username!==(0,g.ID)("All").Username&&e.Course===(0,g.ID)("Course")&&(0,P.jsxs)(d.A,{className:"grid grid-cols-4",children:[(0,P.jsx)(o.A,{children:e.Username}),(0,P.jsx)(o.A,{children:e.Email}),(0,P.jsx)(o.A,{children:e.Phone}),(0,P.jsxs)(a.A,{className:"grid grid-cols-2 place-content-start",children:[(0,P.jsx)(a.A,{className:`ml-3 relative w-16 h-7 ${"Access"===e.Permission?"bg-[#1976d2]":"bg-gray-400"} rounded-full flex items-center`,children:(0,P.jsx)(n.A,{className:"absolute "+("Access"===e.Permission?"left-[1.65rem]":"left-[-0.60rem]"),sx:{transition:"0.3s ease-in-out",zIndex:"10",marginBottom:"0.80px"},onClick:()=>{$(`${e.id}~${e.Permission}`),T(!0)},children:"Access"===e.Permission?(0,P.jsx)(C.A,{sx:{width:"1.90rem",height:"1.90rem",color:"#fff"}}):(0,P.jsx)(y.A,{sx:{width:"1.90rem",height:"1.90rem",color:"#fff"}})})}),(0,P.jsx)(m.A,{variant:"contained",color:"error",sx:{height:"30px"},onClick:()=>{M(e.id),T(!0)},children:"Delete"})]})]})))]})}):(0,P.jsxs)(a.A,{className:"w-full h-1/2 flex flex-col items-center justify-center",children:[(0,P.jsx)(w,{sx:{fontSize:"150px",color:"lightgrey"}}),(0,P.jsx)(o.A,{variant:"h5",color:"lightgrey",children:"No user found"})]}),(0,P.jsxs)(h.A,{open:B,sx:{zIndex:"900"},children:[(0,P.jsxs)(x.A,{children:["Are you sure you want to ",E?"delete User":"change User Permission","?"]}),(0,P.jsx)(A.A,{children:E?"This Cannot be undone. User will be deleted permanently.":"This will change User Permission."}),(0,P.jsxs)(u.A,{children:[(0,P.jsx)(m.A,{variant:"outlined",onClick:()=>{$(null),M(null),T(!1)},children:"Cancel"}),(0,P.jsx)(m.A,{variant:"contained",onClick:()=>{(async()=>{r(!0);let e,l={id:E||R.split("~")[0]};R&&(l.Permission="Access"===R.split("~")[1]?"Denied":"Access"),e=E?await U(l):await D(l),r(!0),$(null),M(null),l={},V(),!0===e?s("success",E?"User deleted successfully.":"User permission changed successfully."):s("error",e.message)})(),T(!1)},color:E?"error":"primary",children:E?"Delete User":"Confirm"})]})]})]})}},18921:(e,s,r)=>{r.d(s,{A:()=>n});var l=r(66734),i=r(70579);const n=(0,l.A)((0,i.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m4.3 14.3c-.39.39-1.02.39-1.41 0L12 13.41 9.11 16.3c-.39.39-1.02.39-1.41 0a.996.996 0 0 1 0-1.41L10.59 12 7.7 9.11a.996.996 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L12 10.59l2.89-2.89c.39-.39 1.02-.39 1.41 0s.39 1.02 0 1.41L13.41 12l2.89 2.89c.38.38.38 1.02 0 1.41"}),"CancelRounded")},35741:(e,s,r)=>{r.d(s,{A:()=>n});var l=r(66734),i=r(70579);const n=(0,l.A)((0,i.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.29 16.29 5.7 12.7a.996.996 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0s.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0"}),"CheckCircleRounded")},67610:(e,s,r)=>{r.d(s,{A:()=>n});var l=r(66734),i=r(70579);const n=(0,l.A)((0,i.jsx)("path",{d:"M12 5V2.21c0-.45-.54-.67-.85-.35l-3.8 3.79c-.2.2-.2.51 0 .71l3.79 3.79c.32.31.86.09.86-.36V7c3.73 0 6.68 3.42 5.86 7.29-.47 2.27-2.31 4.1-4.57 4.57-3.57.75-6.75-1.7-7.23-5.01-.07-.48-.49-.85-.98-.85-.6 0-1.08.53-1 1.13.62 4.39 4.8 7.64 9.53 6.72 3.12-.61 5.63-3.12 6.24-6.24C20.84 9.48 16.94 5 12 5"}),"ReplayRounded")}}]);
//# sourceMappingURL=6165.8891894c.chunk.js.map