"use strict";(self.webpackChunkvcube=self.webpackChunkvcube||[]).push([[815],{80815:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(65043),r=a(82579),n=a(94516),i=a(77739),l=a(17392),o=a(53193),c=a(79190),d=a(72221),p=a(32143),u=a(11906),h=a(41020),m=a(94496),A=a(70579);const y=e=>{let{open:t,id:a,anchorEl:r,setAnchorEl:o,month:c,year:d,stdMonthDates:p,batchMonthDates:u,attType:y,selectedValue:g,watch_Time_Arr:f,moctTestScore:x}=e;const[v,b]=(0,s.useState)([]),$=[];for(let s=1;s<=g;s++)$.push(s);const w=Array.isArray(p)&&c&&p[parseInt(c.split("~")[2])],S="Assignment"===y?$:Array.isArray(u)&&c&&u[parseInt(c.split("~")[2])],j=["S","M","T","W","T","F","S"],D=(e,t)=>{const a=new Date(e,t,1).getDay(),s=[];for(let r=1;r<=a;r++)s.push(" ");return s};(0,s.useEffect)((()=>{const e=Array.from({length:c&&parseInt(c.split("~")[1])},((e,t)=>t+1));b([...j,...D(parseInt(d),c&&parseInt(c.split("~")[2])),...e])}),[c]);return(0,A.jsx)(h.Ay,{id:a,open:t,anchorEl:r,onClose:()=>{o(null)},anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,A.jsxs)(n.A,{className:"w-[20rem] h-auto",children:[(0,A.jsx)(m.A,{sx:{position:"absolute",fontWeight:"bold",fontSize:"20px"},className:"top-5 right-5 text-slate-400",children:"Watch Time"!==y?`${Array.isArray(w)&&w.length>0&&Array.isArray(S)&&S.length>0?Math.floor(w.length/S.length*100):0}%`:(e=>{const t=Object.values(e).reduce(((e,t)=>e+Number(t)),0);return`${Math.floor(parseInt(t)/60)}m : ${parseInt(t)%60}s`})(f)}),(0,A.jsx)(m.A,{sx:{margin:"20px 0 30px 30px"},variant:"h5",children:`${c&&c.split("~")[0]} ${d}`}),(0,A.jsx)(n.A,{className:"w-[90%] h-[85%] mt-[5%] ml-[3%] mb-5 grid grid-cols-7 gap-3",children:v.map(((e,t)=>(0,A.jsx)(n.A,{className:"w-10 h-10 rounded-full flex items-center justify-center "+(w&&w.map(Number).includes(e)?"bg-[#4caf50]":S&&S.map(Number).includes(e)?"bg-[#1976d2]":""),children:(0,A.jsx)(i.A,{title:"Watch Time"===y?Array.isArray(w)&&w.map(Number).includes(e)?`${Math.floor(parseInt(f[e])/60)} m : ${parseInt(f[e])%60} s`:null:"Mock Test"===y&&c&&x[0][c.split("~")[0]]?x[0][c.split("~")[0]][e]:null,arrow:!0,children:(0,A.jsx)(l.A,{className:"w-10 h-10",color:w&&w.map(Number).includes(e+1)?"primary":S&&S.map(Number).includes(e)?"success":"",children:(0,A.jsx)(m.A,{className:w&&w.map(Number).includes(e)||S&&S.map(Number).includes(e)?"text-white":parseInt(e)>0?"text-gray-500":"text-[#1976d2]",children:e})})})},t)))})]})})};var g=a(68613),f=a(96509),x=a(88076);const v=e=>{let{batchAttendanceData:t,stdAttendanceData:a,selectedYear:h,setSelectedYear:m,JoiningDate:v,stdId:b,handleShowSnackbar:$,name:w,phone:S}=e;const{fetchStudentWatchTimeData:j,fetchAssignmentResults:D}=(0,s.useContext)(x.e),[T,M]=(0,s.useState)(null),[C,I]=(0,s.useState)(null),[N,k]=(0,s.useState)([]),[E,O]=(0,s.useState)([]),[V,L]=(0,s.useState)([]),[W,_]=(0,s.useState)([]),[R,F]=(0,s.useState)(null),[z,B]=(0,s.useState)(0),[G,H]=(0,s.useState)([]),[Y,J]=(0,s.useState)([{}]),X=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],P=[31,28,31,30,31,30,31,31,30,31,30,31],q=[];for(let s=2021;s<=(new Date).getFullYear();s++)q.push(s);const K=()=>{if("Watch Time"===R)return void U();const e=Array.isArray(a)&&a.filter((e=>e.Date.split("-")[2]===`${h}`&&"Assignment"===R?e.Attendance_Type.split("~")[0]===R:e.Attendance_Type===R)),s=Array.isArray(t)&&t.filter((e=>e.Date.split("-")[2]===`${h}`&&e.Attendance_Type===R));"Mock Test"===R&&Q(),O([]),X.forEach((t=>{let a=0;Array.isArray(e)&&e.forEach((e=>{e.Date.split("-")[1]===t&&e.Date.split("-")[2]===h.toString()&&("Assignment"===R?e.Attendance_Type.split("~")[0]:e.Attendance_Type)===R&&a++})),O((e=>[...e,a]))})),k([]),X.forEach(((e,t)=>{let a=0;Array.isArray(s)&&s.forEach((t=>{t.Date.split("-")[1]===e&&t.Date.split("-")[2]===h.toString()&&t.Attendance_Type===R&&a++})),"Assignment"===R&&(e=>{const t=new Date(e),a=new Date;a.setDate(1),a.setMonth(a.getMonth()+1);const s=[];let r=new Date(t);for(;r<a;){const e=r.toLocaleString("en-US",{month:"short"}),t=r.getFullYear();s.push(`${e}-${t}`),r.setMonth(r.getMonth()+1)}return s})(v).includes(`${e}-${h}`)?k((e=>[...e,P[t]])):k((e=>[...e,a]))})),_([]),X.forEach((e=>{let t=[];s.forEach((a=>{a.Date.split("-")[1]===e&&a.Date.split("-")[2]===h.toString()&&a.Attendance_Type===R&&t.push(a.Date.split("-")[0])})),_((e=>[...e,t]))})),L([]),X.forEach((t=>{let a=[];Array.isArray(e)&&e.forEach((e=>{e.Date.split("-")[1]===t&&e.Date.split("-")[2]===h.toString()&&("Assignment"===R?e.Attendance_Type.split("~")[0]:e.Attendance_Type)===R&&a.push(e.Date.split("-")[0])})),L((e=>[...e,a]))}))};(0,s.useEffect)((()=>{K()}),[h]);const U=async()=>{L([]),O([]),k([]),_([]),H([]);const e=await j(b);e&&e.message?$("error",`An error occured ${e.message}`):e&&X.forEach((t=>{let a=[];Array.isArray(e)&&e.forEach((e=>{e.Name===`${w}~${S}`&&`${e.Date.split("-")[1]}-${e.Date.split("-")[2]}`===`${t}-${h}`&&(a.push(e.Date.split("-")[0]),H((t=>({...t,[e.Date.split("-")[0]]:e.WatchTime}))))})),L((e=>[...e,a])),O((e=>[...e,a.length])),k((e=>[...e,a.length]))}))},Q=async()=>{J([{}]);const e=await D(b);e&&e.message?$("error",`Failed to get Weekly Test Score. ${e.message}`):X.forEach((t=>{Array.isArray(e)&&e.forEach((e=>{e.Name===`${w}~${S}`&&e.StudentId===b&&`${e.Date.split("-")[1]}-${e.Date.split("-")[2]}`===`${t}-${h}`&&J((a=>{const s=[...a];s[0]||(s[0]={}),s[0][t]||(s[0][t]={});const r=e.Date.split("-")[0];return s[0][t][parseInt(r)]="Disqualified"===e.Status?e.Status:e.Score,s}))}))}))},Z=Boolean(T),ee=Z?"simple-popover":void 0;return(0,A.jsxs)(n.A,{className:"w-full mt-10 flex flex-col items-center justify-around",children:[(0,A.jsx)(r.b,{xAxis:[{scaleType:"point",data:X}],series:[{data:Array.isArray(E)&&E.length>0?E:[0,0,0,0,0,0,0,0,0,0,0,0],area:!0,label:`Detailed ${h||""} ${R||""} Attendance Analysis.`}],width:950,height:300}),h&&(0,A.jsx)(n.A,{className:"w-[900px] -mt-5 flex flex-row items-center justify-between mb-10",children:Array.isArray(N)&&N.map(((e,t)=>(0,A.jsx)(i.A,{title:"View Monthly Attendance Calendar",arrow:!0,children:(0,A.jsx)(l.A,{onClick:a=>((e,t,a)=>{I(`${X[t]}~${P[t]}~${t}`),M(e.currentTarget),B(a)})(a,t,e),sx:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center"},color:"primary",children:e},t)})))}),(0,A.jsxs)(n.A,{className:"w-[80%] flex flex-row items-center justify-evenly mt-5",children:[(0,A.jsxs)(n.A,{className:"w-[30%] flex flex-row items-center justify-between",children:[(0,A.jsx)(g.A,{sx:{fontSize:"30px",marginTop:"15px",color:"grey"}}),(0,A.jsxs)(o.A,{className:"w-[87%]",variant:"standard",children:[(0,A.jsx)(c.A,{children:"Select Attendance Type*"}),(0,A.jsx)(d.A,{value:R,onChange:e=>{F(e.target.value)},children:["Class","Assignment","Watch Time","Weekly Test","Interview"].map((e=>(0,A.jsx)(p.A,{value:"Weekly Test"===e?"Mock Test":e,children:e})))})]})]}),(0,A.jsxs)(n.A,{className:"w-[30%] flex flex-row items-center justify-between",children:[(0,A.jsx)(f.A,{sx:{fontSize:"30px",marginTop:"15px",color:"grey"}}),(0,A.jsxs)(o.A,{className:"w-[87%]",variant:"standard",children:[(0,A.jsx)(c.A,{children:"Select Year*"}),(0,A.jsx)(d.A,{value:h,onChange:e=>{m(e.target.value)},children:q.map((e=>(0,A.jsx)(p.A,{value:e,children:e})))})]})]}),(0,A.jsx)(u.A,{variant:"contained",sx:{width:"20%",height:"40px",borderRadius:"20px"},onClick:()=>{K()},children:"Submit"})]}),(0,A.jsx)(y,{open:Z,id:ee,anchorEl:T,setAnchorEl:M,month:C,year:h&&h,stdMonthDates:V,batchMonthDates:W,attType:R,selectedValue:z,watch_Time_Arr:G,moctTestScore:Y})]})}},96509:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(66734),r=a(70579);const n=(0,s.A)((0,r.jsx)("path",{d:"M17 2c-.55 0-1 .45-1 1v1H8V3c0-.55-.45-1-1-1s-1 .45-1 1v1H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-1V3c0-.55-.45-1-1-1m2 18H5V10h14zm-8-7c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m-4 0c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m8 0c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m-4 4c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m-4 0c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1m8 0c0-.55.45-1 1-1s1 .45 1 1-.45 1-1 1-1-.45-1-1"}),"CalendarMonthRounded")},68613:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(66734),r=a(70579);const n=(0,s.A)((0,r.jsx)("path",{d:"M22 8c0-.55-.45-1-1-1h-7c-.55 0-1 .45-1 1s.45 1 1 1h7c.55 0 1-.45 1-1m-9 8c0 .55.45 1 1 1h7c.55 0 1-.45 1-1s-.45-1-1-1h-7c-.55 0-1 .45-1 1M10.47 4.63c.39.39.39 1.02 0 1.41l-4.23 4.25c-.39.39-1.02.39-1.42 0L2.7 8.16a.996.996 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0l1.42 1.42 3.54-3.54c.38-.38 1.02-.38 1.4 0m.01 8.01c.39.39.39 1.02 0 1.41L6.25 18.3c-.39.39-1.02.39-1.42 0L2.7 16.16c-.39-.39-.39-1.02 0-1.41s1.02-.39 1.41 0l1.42 1.42 3.54-3.54c.38-.38 1.02-.38 1.41.01"}),"ChecklistRounded")},5658:(e,t,a)=>{a.d(t,{A:()=>i,K:()=>n});var s=a(92532),r=a(72372);function n(e){return(0,r.Ay)("MuiDivider",e)}const i=(0,s.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])},71424:(e,t,a)=>{a.d(t,{A:()=>i,f:()=>n});var s=a(92532),r=a(72372);function n(e){return(0,r.Ay)("MuiListItemIcon",e)}const i=(0,s.A)("MuiListItemIcon",["root","alignItemsFlexStart"])},28052:(e,t,a)=>{a.d(t,{A:()=>i,b:()=>n});var s=a(92532),r=a(72372);function n(e){return(0,r.Ay)("MuiListItemText",e)}const i=(0,s.A)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"])},32143:(e,t,a)=>{a.d(t,{A:()=>S});var s=a(65043),r=a(58387),n=a(98610),i=a(55500),l=a(61475),o=a(34535),c=a(66870),d=a(28249),p=a(51347),u=a(64551),h=a(55013),m=a(95849),A=a(5658),y=a(71424),g=a(28052),f=a(92532),x=a(72372);function v(e){return(0,x.Ay)("MuiMenuItem",e)}const b=(0,f.A)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var $=a(70579);const w=(0,o.Ay)(u.A,{shouldForwardProp:e=>(0,l.A)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]}})((0,c.A)((e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${b.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${b.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:(0,i.X4)(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${b.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${b.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${A.A.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${A.A.inset}`]:{marginLeft:52},[`& .${g.A.root}`]:{marginTop:0,marginBottom:0},[`& .${g.A.inset}`]:{paddingLeft:36},[`& .${y.A.root}`]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,[`& .${y.A.root} svg`]:{fontSize:"1.25rem"}}}]}}))),S=s.forwardRef((function(e,t){const a=(0,d.b)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:l="li",dense:o=!1,divider:c=!1,disableGutters:u=!1,focusVisibleClassName:A,role:y="menuitem",tabIndex:g,className:f,...x}=a,b=s.useContext(p.A),S=s.useMemo((()=>({dense:o||b.dense||!1,disableGutters:u})),[b.dense,o,u]),j=s.useRef(null);(0,h.A)((()=>{i&&j.current&&j.current.focus()}),[i]);const D={...a,dense:S.dense,divider:c,disableGutters:u},T=(e=>{const{disabled:t,dense:a,divider:s,disableGutters:r,selected:i,classes:l}=e,o={root:["root",a&&"dense",t&&"disabled",!r&&"gutters",s&&"divider",i&&"selected"]},c=(0,n.A)(o,v,l);return{...l,...c}})(a),M=(0,m.A)(j,t);let C;return a.disabled||(C=void 0!==g?g:-1),(0,$.jsx)(p.A.Provider,{value:S,children:(0,$.jsx)(w,{ref:M,role:y,tabIndex:C,component:l,focusVisibleClassName:(0,r.A)(T.focusVisible,A),className:(0,r.A)(T.root,f),...x,ownerState:D,classes:T})})}))}}]);
//# sourceMappingURL=815.66b64a90.chunk.js.map