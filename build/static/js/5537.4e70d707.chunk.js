"use strict";(self.webpackChunkvcube=self.webpackChunkvcube||[]).push([[5537],{55537:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var a=r(65043),i=r(83462),l=r(17392),s=r(26600),n=r(35316),o=r(94516),c=r(94496),d=r(39336),h=r(90573),m=r(93544),f=r(4247),p=r(88076),x=r(70579);const g=e=>{let{isOpen:t,setIsOpen:r,stdId:g,course:u,batchName:A,handleShowSnackbar:w,setIsLoading:v,batchAttendanceData:y}=e;const{getStudentAttendanceByCourse:b,fetchStudentsData:j,fetchAssignmentResults:S}=(0,a.useContext)(p.e),[N,I]=(0,a.useState)([]),[C,$]=(0,a.useState)([]),[L,R]=(0,a.useState)([]),[k,W]=(0,a.useState)(!1),M=["Class","Mock Test","Interview"],T=async(e,t)=>{v(!0);const r=await b(u),a=await S();if(r&&r.message||a&&a.message)r&&r.message&&w("error",`Error occured while fetching data. Please try again later. ${r.message}`),a&&a.message&&w("error",`Failed to get Weekly Test Score. ${r.message}`);else if(r&&a){I([]);const i=[];Array.isArray(e)&&e.forEach((e=>{let l=0;Array.isArray(r)&&r.forEach((t=>{e.id===t.StudentId&&e.BatchName===t.BatchName&&e.Course===t.Course&&t.Name===`${e.Name}~${e.Phone}`&&M.includes(t.Attendance_Type)&&l++}));const s=l>0&&t>0?Math.floor(l/t*100):0,n=Array.isArray(a)&&a.filter((t=>t.StudentId===e.id&&t.Name===`${e.Name}~${e.Phone}`)),o=n.reduce(((e,t)=>e+parseInt(t.Score,10)),0),c=o>0&&n.length>0?Math.floor(o/(100*n.length)*100):0,d=Math.floor((s+c)/200*100);i.push({Image:JSON.parse(e.Personal_Info).Image,Name:e.Name,Score:d,Self:g===e.id})})),i.sort(((e,t)=>t.Score-e.Score));const l=i.splice(0,3);I(i),$(l);const s=!!Array.isArray(l)&&l.some((e=>e.Self));W(s),R(s?null:i.find((e=>e.Self)))}v(!1)};return(0,a.useEffect)((()=>{(async()=>{const e=Array.isArray(y)?y.filter((e=>M.includes(e.Attendance_Type))).length:0;if(e<1)return;const t=await j(u);if(t&&t.message)w("error",`Error occured while fetching data. Please try again later. ${t.message}`);else if(t){const r=Array.isArray(t)?t.filter((e=>e.Course===u&&e.BatchName===A)):[];T(r,e)}})()}),[t]),(0,x.jsxs)(i.A,{open:t,sx:{zIndex:"700"},children:[(0,x.jsx)("img",{src:"/images/V-Cube-Logo.png",width:"16%",className:"ml-[42%]"}),(0,x.jsx)(l.A,{sx:{position:"absolute"},className:"top-1 right-1",onClick:()=>r(!1),children:(0,x.jsx)(h.A,{fontSize:"large"})}),(0,x.jsxs)(s.A,{variant:"h5",className:"flex items-center",children:["Leaderboard",(0,x.jsx)(m.A,{fontSize:"medium",sx:{marginLeft:"10px"}})]}),Array.isArray(N)&&N.length>0&&Array.isArray(C)&&3===C.length&&C.every((e=>e.Score>0))?(0,x.jsxs)(n.A,{className:"w-full h-[40rem] flex flex-col items-center justify-start",children:[(0,x.jsx)(o.A,{className:"flex items-end justify-evenly w-full h-1/2",children:Array.isArray(C)&&C.length>0?[16,32,24].map(((e,t)=>(0,x.jsxs)(o.A,{className:`relative w-16 h-${e} ${0===t?"bg-[#d5d5d5]":1===t?"bg-[#ffdc69]":"bg-[#ffd1b8]"} rounded-md pt-3`,children:[(0,x.jsxs)(o.A,{className:"absolute w-full h-28 -top-28 flex flex-col items-center justify-evenly",children:[1===t&&(0,x.jsx)("img",{src:"/images/crown.png",width:"50px",alt:"",className:"absolute -top-9"}),(0,x.jsx)("img",{src:C[0===t?2:t-1].Image,alt:"",width:"50px",className:"h-[50px] rounded-full object-contain border-[1px] border-slate-300"}),(0,x.jsx)(c.A,{variant:"span",sx:{fontSize:"12px"},className:"w-56 text-center",children:C[0===t?2:t-1].Name}),(0,x.jsxs)(c.A,{className:"flex items-center",children:[(0,x.jsx)(f.A,{sx:{color:"#f6af39"}})," ",C[0===t?2:t-1].Score]})]}),(0,x.jsx)(c.A,{color:"white",variant:"h5",className:"w-full text-center",children:0===t?3:t})]},t))):(0,x.jsx)(x.Fragment,{})}),(0,x.jsxs)(o.A,{className:"w-full h-[55%] border-2 mt-1 rounded-md overflow-hidden",children:[(0,x.jsx)(o.A,{className:"w-full h-[8%] flex items-center justify-between",children:[15,70,15].map(((e,t)=>(0,x.jsx)(c.A,{className:`w-[${e}%] h-full flex items-center' ${1===t?"justify-start pl-14":"justify-center"}`,sx:{fontWeight:"bold"},children:0===t?"Rank":1===t?"Name":"Score"},t)))}),(0,x.jsx)(d.A,{}),(0,x.jsx)(o.A,{className:"w-full overflow-auto",sx:{height:k?"90%":"78%",scrollbarWidth:"none"},children:Array.isArray(N)&&N.length>0?N.map(((e,t)=>!e.Self&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(o.A,{className:"w-full flex items-center justify-between",sx:{height:k?"15%":"16%"},children:[(0,x.jsx)(c.A,{className:"w-[15%] text-center",children:t+4}),(0,x.jsxs)(c.A,{className:"w-[70%] text-start flex items-center pl-2",children:[(0,x.jsx)("img",{src:e.Image,alt:"",width:"30px",className:"h-[30px] mr-5 rounded-full object-contain border-[1px] border-slate-300"}),(0,x.jsx)(c.A,{variant:"span",children:e.Name})]}),(0,x.jsx)(c.A,{className:"w-[15%] text-center",children:e.Score})]}),(0,x.jsx)(d.A,{})]}))):(0,x.jsx)(x.Fragment,{})}),!k&&L?(0,x.jsx)(o.A,{className:"w-full h-[15%]",children:(0,x.jsxs)(o.A,{className:"w-full h-full flex items-center justify-between bg-[#1976d2] text-white",children:[(0,x.jsx)(c.A,{className:"w-[15%] text-center",children:Array.isArray(N)&&N.length>0?N.findIndex((e=>e.Self))+4:void 0}),(0,x.jsxs)(c.A,{className:"w-[70%] text-start flex items-center pl-2",children:[(0,x.jsx)("img",{src:L.Image,alt:"",width:"30px",className:"h-[30px] mr-5 bg-white rounded-full object-contain border-[1px] border-slate-300"}),(0,x.jsx)(c.A,{variant:"span",children:L.Name})]}),(0,x.jsx)(c.A,{className:"w-[15%] text-center",children:L.Score})]})}):(0,x.jsx)(x.Fragment,{})]})]}):(0,x.jsx)(n.A,{className:"w-full h-[40rem] flex flex-col items-center justify-center",children:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("img",{src:"/images/hourGlass.gif",alt:"",width:"70%"}),(0,x.jsx)(c.A,{color:"grey",variant:"h6",className:"text-center",children:"We\u2019ll have the Leaderboard results ready for you soon after your classes and attendance begin!"})]})})]})}},4247:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(66734),i=r(70579);const l=(0,a.A)((0,i.jsx)("path",{d:"m12 17.27 4.15 2.51c.76.46 1.69-.22 1.49-1.08l-1.1-4.72 3.67-3.18c.67-.58.31-1.68-.57-1.75l-4.83-.41-1.89-4.46c-.34-.81-1.5-.81-1.84 0L9.19 8.63l-4.83.41c-.88.07-1.24 1.17-.57 1.75l3.67 3.18-1.1 4.72c-.2.86.73 1.54 1.49 1.08z"}),"StarRounded")},39336:(e,t,r)=>{r.d(t,{A:()=>x});var a=r(65043),i=r(58387),l=r(98610),s=r(55500),n=r(34535),o=r(66870),c=r(28249),d=r(5658),h=r(70579);const m=(0,n.Ay)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})((0,o.A)((e=>{let{theme:t}=e;return{margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(t.vars||t).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:t.vars?`rgba(${t.vars.palette.dividerChannel} / 0.08)`:(0,s.X4)(t.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:t.spacing(2),marginRight:t.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:t.spacing(1),marginBottom:t.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:e=>{let{ownerState:t}=e;return!!t.children},style:{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:e=>{let{ownerState:t}=e;return t.children&&"vertical"!==t.orientation},style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(t.vars||t).palette.divider}`,borderTopStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"vertical"===t.orientation&&t.children},style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(t.vars||t).palette.divider}`,borderLeftStyle:"inherit"}}},{props:e=>{let{ownerState:t}=e;return"right"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:e=>{let{ownerState:t}=e;return"left"===t.textAlign&&"vertical"!==t.orientation},style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}}))),f=(0,n.Ay)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})((0,o.A)((e=>{let{theme:t}=e;return{display:"inline-block",paddingLeft:`calc(${t.spacing(1)} * 1.2)`,paddingRight:`calc(${t.spacing(1)} * 1.2)`,variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${t.spacing(1)} * 1.2)`,paddingBottom:`calc(${t.spacing(1)} * 1.2)`}}]}}))),p=a.forwardRef((function(e,t){const r=(0,c.b)({props:e,name:"MuiDivider"}),{absolute:a=!1,children:s,className:n,orientation:o="horizontal",component:p=(s||"vertical"===o?"div":"hr"),flexItem:x=!1,light:g=!1,role:u=("hr"!==p?"separator":void 0),textAlign:A="center",variant:w="fullWidth",...v}=r,y={...r,absolute:a,component:p,flexItem:x,light:g,orientation:o,role:u,textAlign:A,variant:w},b=(e=>{const{absolute:t,children:r,classes:a,flexItem:i,light:s,orientation:n,textAlign:o,variant:c}=e,h={root:["root",t&&"absolute",c,s&&"light","vertical"===n&&"vertical",i&&"flexItem",r&&"withChildren",r&&"vertical"===n&&"withChildrenVertical","right"===o&&"vertical"!==n&&"textAlignRight","left"===o&&"vertical"!==n&&"textAlignLeft"],wrapper:["wrapper","vertical"===n&&"wrapperVertical"]};return(0,l.A)(h,d.K,a)})(y);return(0,h.jsx)(m,{as:p,className:(0,i.A)(b.root,n),role:u,ref:t,ownerState:y,"aria-orientation":"separator"!==u||"hr"===p&&"vertical"!==o?void 0:o,...v,children:s?(0,h.jsx)(f,{className:b.wrapper,ownerState:y,children:s}):null})}));p&&(p.muiSkipListHighlight=!0);const x=p},5658:(e,t,r)=>{r.d(t,{A:()=>s,K:()=>l});var a=r(92532),i=r(72372);function l(e){return(0,i.Ay)("MuiDivider",e)}const s=(0,a.A)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"])}}]);
//# sourceMappingURL=5537.4e70d707.chunk.js.map