"use strict";(self.webpackChunkvcube=self.webpackChunkvcube||[]).push([[9718],{9718:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var a=s(65043),r=s(83462),c=s(26600),n=s(94496),o=s(35316),l=s(98533),i=s(94516),d=s(53193),h=s(79190),u=s(72221),x=s(32143),m=s(81673),f=s(69413),p=s(74605),A=s(51962),v=s(29347),j=s(11906),w=s(59905),B=s(32514),g=s(6821),C=s(55312),S=s(86012),N=s(28633),b=s(37786),y=s(88076),D=(s(12947),s(9971)),M=s(70579);const z=e=>{let{courseData:t,openBatchOption:s,setOpenBatchOption:z,batchOption:R,setBatchOption:k,handleShowSnackbar:G,setIsLoading:F,fetch_Data:I,selectedCourse:O}=e;const{fetchBatchData:E,postBatchData:L,deleteBatchData:V,deleteBatchRecords:$}=(0,a.useContext)(b.w),{fetchStudentsData:H}=(0,a.useContext)(y.e),P=(0,B.ID)("Course"),[T,_]=(0,a.useState)(null),[J,U]=(0,a.useState)(null),[W,q]=(0,a.useState)(!1),[K,Q]=(0,a.useState)(null),[X,Y]=(0,a.useState)([]);(0,a.useEffect)((()=>{ee()}),[]);const Z=()=>{z(!1),k(null),q(!1),I()},ee=async()=>{const e="All"===P?await E():await E(P);e&&e.message?(G("error",`${e.message}.`),Z()):e&&0===e.length?"Delete Batch"===R&&(G("info","No batch data found. Please add new batch and Try again later."),Z()):Q(e)},te=e=>{const t=K?K.filter((e=>X.includes(e.id))):[];return!!e&&e.some((e=>t.some((t=>t.BatchName===JSON.parse(e.Personal_Info).BatchName))))},se=async(e,t)=>{const s=await V(e);!0===s&&await $(e.id),X.length-1===t&&(!0===s?G("success","Selected Batch deleted successfully."):s&&s.message&&G("error",s.message),Z())},ae=()=>{if("All"===P){if(T&&J)return!0}else if(T)return!0;return!1};return(0,M.jsxs)(r.A,{open:s,sx:{zIndex:"800"},children:[(0,M.jsx)("img",{src:"/images/V-Cube-Logo.png",alt:"",width:"20%",className:"ml-[40%]"}),(0,M.jsxs)(c.A,{className:"flex items-center justify-start",children:[(0,M.jsx)(n.A,{variant:"h5",sx:{marginRight:"10px"},children:"Add Batch"===R?"Add Batch":"Delete Batch"}),"Add Batch"===R?(0,M.jsx)(g.A,{sx:{fontSize:"25px"}}):(0,M.jsx)(C.A,{sx:{fontSize:"25px"}})]}),(0,M.jsx)(o.A,{className:"w-full mt-10 mb-10",children:"Add Batch"===R?(0,M.jsxs)(l.A,{children:[(0,M.jsxs)(i.A,{className:"flex items-start h-20 justify-between w-[80%] ml-[10%]",children:[(0,M.jsx)(S.A,{className:"mt-6",sx:{fontSize:"30px"}}),(0,M.jsx)(w.A,{label:"Enter Batch Name",sx:{width:"90%"},value:T,onChange:e=>_(e.target.value.toUpperCase()),error:W&&!T,helperText:W&&!T?"Enter Batch":""})]}),"All"===P&&(0,M.jsxs)(i.A,{className:"flex items-start h-20 justify-between w-[80%] ml-[10%]",children:[(0,M.jsx)(N.A,{className:"mt-6",sx:{fontSize:"30px"}}),(0,M.jsxs)(d.A,{variant:"standard",sx:{width:"90%"},children:[(0,M.jsx)(h.A,{shrink:!!J,sx:{fontSize:"20px",color:W&&!J?"#d32f2f":""},children:"Select Course"}),(0,M.jsx)(u.A,{error:W&&!J,value:J,onChange:e=>U(e.target.value),sx:{width:"100%","& .MuiInputBase-input":{fontSize:"20px",padding:"5px 0"},"& .MuiInputLabel-root":{fontSize:"20px"}},children:t&&t.map((e=>(0,M.jsx)(x.A,{value:e.Course,children:e.Course})))}),(0,M.jsx)(m.A,{sx:{color:"#d32f2f"},children:W&&!J?"Select Batch":""})]})]})]}):(0,M.jsx)(M.Fragment,{children:(0,M.jsx)(l.A,{className:"max-h-96 min-h-24 overflow-y-auto p-5",children:(0,M.jsx)(f.A,{children:K&&K.map((e=>{if(e.Course===O)return(0,M.jsx)(p.A,{control:(0,M.jsx)(A.A,{sx:{transform:"scale(1.5)"},onChange:t=>t.target.checked?Y((t=>[...t,e.id])):Y(X.filter((t=>t!==e.id)))}),label:(0,M.jsx)(n.A,{sx:{fontSize:"25px",marginLeft:"15px",userSelect:"none"},children:e.BatchName})})}))})})})}),(0,M.jsxs)(v.A,{children:[(0,M.jsx)(j.A,{variant:"outlined",onClick:Z,children:"Cancel"}),(0,M.jsx)(j.A,{variant:"contained",onClick:async()=>{if("Add Batch"===R){if(q(!0),!ae())return;if(F(!0),K&&K.some((e=>e.BatchName===T)))G("warning",`Batch - ${T} already exists.`);else{const e={BatchName:T,Course:"All"===P?J:P,Date:(0,D.c)().split(" ")[0]},t=await L(e);!0===t?G("success",`${T} added successfully.`):t&&t.message&&G("error",t.message)}Z(),F(!1)}else if("Delete Batch"===R){if(!X||0===X.length)return;F(!0);const e=await H(O);e&&e.message?(G("error",e.message),Z()):te(e)?(G("error","Cannot delete the Batch. Students assigned to the Selected Batch."),Z()):X.forEach(((e,t)=>{K.forEach((s=>{s.id!==e||se(s,t)}))}))}F(!1)},children:"Add Batch"===R?"Add Batch":"Delete Batch"})]})]})}},28633:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(66734),r=s(70579);const c=(0,a.A)((0,r.jsx)("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 4h5v8l-2.5-1.5L6 12z"}),"ClassRounded")},6821:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(66734),r=s(70579);const c=(0,a.A)((0,r.jsx)("path",{d:"M22 9V8c0-.55-.45-1-1-1s-1 .45-1 1v1h-1c-.55 0-1 .45-1 1s.45 1 1 1h1v1c0 .55.45 1 1 1s1-.45 1-1v-1h1c.55 0 1-.45 1-1s-.45-1-1-1zM8 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m4.51-8.95C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupAddRounded")},55312:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(66734),r=s(70579);const c=(0,a.A)((0,r.jsx)("path",{d:"M18 10c0-.55.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1h-4c-.55 0-1-.45-1-1M8 4C5.79 4 4 5.79 4 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 9c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m4.51-8.95C13.43 5.11 14 6.49 14 8s-.57 2.89-1.49 3.95C14.47 11.7 16 10.04 16 8s-1.53-3.7-3.49-3.95m4.02 9.78C17.42 14.66 18 15.7 18 17v3h2v-3c0-1.45-1.59-2.51-3.47-3.17"}),"GroupRemoveRounded")},86012:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(66734),r=s(70579);const c=(0,a.A)((0,r.jsx)("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V18c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-1.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05.02.01.03.03.04.04 1.14.83 1.93 1.94 1.93 3.41V18c0 .35-.07.69-.18 1H22c.55 0 1-.45 1-1v-1.5c0-2.33-4.67-3.5-7-3.5"}),"GroupRounded")},69413:(e,t,s)=>{s.d(t,{A:()=>f});var a=s(65043),r=s(58387),c=s(98610),n=s(34535),o=s(28249),l=s(92532),i=s(72372);function d(e){return(0,i.Ay)("MuiFormGroup",e)}(0,l.A)("MuiFormGroup",["root","row","error"]);var h=s(85213),u=s(74827),x=s(70579);const m=(0,n.Ay)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.row&&t.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),f=a.forwardRef((function(e,t){const s=(0,o.b)({props:e,name:"MuiFormGroup"}),{className:a,row:n=!1,...l}=s,i=(0,h.A)(),f=(0,u.A)({props:s,muiFormControl:i,states:["error"]}),p={...s,row:n,error:f.error},A=(e=>{const{classes:t,row:s,error:a}=e,r={root:["root",s&&"row",a&&"error"]};return(0,c.A)(r,d,t)})(p);return(0,x.jsx)(m,{className:(0,r.A)(A.root,a),ownerState:p,ref:t,...l})}))}}]);
//# sourceMappingURL=9718.4f852469.chunk.js.map